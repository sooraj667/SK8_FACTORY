{% extends 'store/userdashboard/loggedin.html' %}
{% load static %}
{% block head %}	
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/2.2.3/jquery.elevatezoom.min.js"></script>
{% comment %} <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> {% endcomment %}
{% endblock head %}




{% block content %}

<div class="row mt-5"></div>
<div class="row mt-5"></div>
<div class="row mt-5"></div>
<div class="row mt-5"></div>
<div class="container-fluid">
    <div class="row">
      
        <div class="container">
            <div class="bg0 p-t-60 p-b-30 p-lr-15-lg how-pos3-parent">
                <button class="how-pos3 hov3 trans-04 js-hide-modal1">
                    <img src="{% static 'store/images/icons/icon-close.png' %}" alt="CLOSE">
                </button>

                <div class="row">
                    <div class="col-md-6 col-lg-7 p-b-30">
                        <div class="p-l-25 p-r-30 p-lr-0-lg">
                            <div class="wrap-slick3 flex-sb flex-w">
                                <div class="wrap-slick3-dots"></div>
                                <div class="wrap-slick3-arrows flex-sb-m flex-w"></div>
                                {% if pdtobj.image1 %}
                                
                                
                               
                                <div class="slick3 gallery-lb">
                                    <div class="item-slick3" data-thumb="{{pdtobj.image1.url}}" >
                                        <div class="wrap-pic-w pos-relative">
                                            <img src="{{pdtobj.image1.url}}" alt="IMG-PRODUCT" data-zoom-image="{{pdtobj.image1.url}}" id="zoom1">

                                            <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="{% static 'store/images/product-detail-01.jpg' %}">
                                                <i class="fa fa-expand"></i>
                                            </a>
                                        </div>
                                    </div>
                                    {% endif %}



                                    {% if pdtobj.image2 %}
                                    <div class="item-slick3" data-thumb="{{pdtobj.image2.url}}">
                                        <div class="wrap-pic-w pos-relative">
                                            <img src="{{pdtobj.image2.url}}" alt="IMG-PRODUCT" >

                                            <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="images/product-detail-02.jpg">
                                                <i class="fa fa-expand"></i>
                                            </a>
                                        </div>
                                    </div>
                                    {% endif %}



                                    {% if pdtobj.image3 %}
                                    <div class="item-slick3" data-thumb="{{pdtobj.image3.url}}">
                                        <div class="wrap-pic-w pos-relative">
                                            <img src="{{pdtobj.image3.url}}" alt="IMG-PRODUCT" >

                                            <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="images/product-detail-03.jpg">
                                                <i class="fa fa-expand"></i>
                                            </a>
                                        </div>
                                    </div>
                                     {% endif %}



                                </div>
                            </div>
                        </div>
                    </div>
                   
                     <div class="col-md-6 col-lg-5 p-b-30">
                        <div class="p-r-50 p-t-5 p-lr-0-lg">
                            <h4  id="productname"   class="mtext-105 cl2 js-name-detail p-b-14">
                                {{pdtobj.name}}
                            </h4>

                            <span id="offer_price" class="mtext-106 cl2">
                                {{pdtobj.price}}
                            </span>

                            <p class="stext-102 cl3 p-t-23">
                                {{pdtobj.description}}
                            </p>


                          

                            
                            <!--  -->
                            <div class="p-t-33">
                                <div class="flex-w flex-r-m p-b-10">
                                    <div class="size-203 flex-c-m respon6">
                                        Size
                                    </div>

                                    <div class="size-204 respon6-next">
                                        <div class="rs1-select2 bor8 bg0">
                                            <select class="js-select2" name="time">
                                                <option>Choose an option</option>
                                                <option>Size S</option>
                                                <option>Size M</option>
                                                <option>Size L</option>
                                                <option>Size XL</option>
                                            </select>
                                            <div class="dropDownSelect2"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex-w flex-r-m p-b-10">
                                    <div class="size-203 flex-c-m respon6">
                                        Color
                                    </div>

                                    <div class="size-204 respon6-next">
                                        <div class="rs1-select2 bor8 bg0">
                                            <select class="js-select2" name="time">
                                                <option>Choose an option</option>
                                                <option>Red</option>
                                                <option>Blue</option>
                                                <option>White</option>
                                                <option>Grey</option>
                                            </select>
                                            <div class="dropDownSelect2"></div>
                                        </div>
                                    </div>
                                </div>


                                <form method="POST" action="">
                                <div class="flex-w flex-r-m p-b-10">
                                    <div class="size-203 flex-c-m respon6">
                                        Offer
                                    </div>
                                
                                    {% csrf_token %}

                                    <div class="size-204 respon6-next">
                                        <div class="rs1-select2 bor8 bg0">
                                            <select id="offerselect" class="js-select2" name="offerselect">
                                                
                                                {% for offer in offers  %}                                    
                                                <option>{{offer.offer_description}}</option>
                                                {% endfor %}
                                               
                                            </select>
                                            <div class="dropDownSelect2"></div>
                                        </div>
                                    </div>
                                   
                                        
                                    <br>
                                    <button name="addoffer" type="submit" id="offerclick" class="flex-c-m stext-101 cl0 btn bg1 bor1 hov-btn1 p-lr-15 trans-04  mt-2">Add Offer</button>
                                
                                    
                                    
                                </div>

                                </form>
                                <div>
                                    {% if offer %}

                                    <span class="text-info">{{offer}} </span> <span class="text-success">applied &#10003;</span>
                                    <span class="mtext-106 cl2 ml-4"> Rs.{{price_after_discount}}</span>
                                    
                                    {% endif %}
                                    <form action="" method="POST">
                                        {% csrf_token %}
                                    {% if offer %}
                                    
                                    
                                    <input type="hidden" name="price_after_discount" value="{{price_after_discount}}">

                                    {% else %}

                                    <input type="hidden" name="price_after_discount" value="{{pdtobj.price}}">




                                    {% endif %}
                                    
                                </div>
                          
                                


                               



                            
                             
                                    <div class="flex-w flex-r-m p-b-10">
                                        <div class="size-204 flex-w flex-m respon6-next">
                                            <div class="wrap-num-product flex-w m-r-20 m-tb-10">
                                                <div class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">
                                                    <i class="fs-16 zmdi zmdi-minus"></i>
                                                </div>
                                                
                                                <input class="mtext-104 cl3 txt-center num-product" type="number" name="quantity" value="1">
    
                                                <div class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m">
                                                    <i class="fs-16 zmdi zmdi-plus"></i>
                                                </div>
                                            </div>

                                            {% if pdtobj.quantity > 0 %}
                                    
                                            <button name="addtocart" type="submit" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 ">
                                                {% comment %} <a href={% url 'addtocart' pdtobj.id %}> Add to cart</a>  {% endcomment %}
                                                Add To Cart
                                            </button>
                                            {% else %}
                                            <div class="row">
                                                <div class="text-danger"> Sorry Out Of Stock! </div>
                                              

                                            </div>
                                            <div class="row mt-4 ml-3">
                                                <button class="btn btn-info">
                                                    <a class="text-dark " href={% url 'loggedinproduct' %}> Back To Shop </a>

                                                </button>
                                            </div>
                                            

                                            {% endif %}
    
                                        </div>
                                    </div>	


                                </form>
                                {% if error %}

                                <div class="text-danger">
                                    {{error}}
                                </div>
                                
                                
                                {% endif %}
                            
                                
                            </div>

                            <!--  -->
                            <div class="flex-w flex-m p-l-100 p-t-40 respon7">
                                <div class="flex-m bor9 p-r-10 m-r-11">
                                    <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 js-addwish-detail tooltip100" data-tooltip="Add to Wishlist">
                                        <i class="zmdi zmdi-favorite"></i>
                                    </a>
                                </div>

                                <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Facebook">
                                    <i class="fa fa-facebook"></i>
                                </a>

                                <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Twitter">
                                    <i class="fa fa-twitter"></i>
                                </a>

                                <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Google Plus">
                                    <i class="fa fa-google-plus"></i>
                                </a>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
        </div>
        .
    </div>


</div>





<script>
    $("#zoom1").elevateZoom();
</script>



{% comment %} <script>
$(document).ready(function() {
    $("#offerclick").click(function() {
      var selectedOffer = $("#offerselect").val();
      //var productName = $("#productname").text(); 
        // Get the selected offer value
      
      // Send an AJAX request to update the offer price
      $.ajax({
        url: "../update_offer_price/", // Replace with the URL of your Django view
        type: "GET",
        data: { offer: selectedOffer,//pdtname=productName,
                
                
            },
        success: function(response) {
          // Update the offer price on the page
          var newOfferPrice = response.offer_price;  // Assuming the response contains the updated offer price
          // Update the appropriate HTML element with the new offer price
          $("#offer_price").text(newOfferPrice);
          alert(response.offer_price);
        },
        error: function(xhr, errmsg, err) {
          // Handle any errors that occur during the AJAX request
          console.log(xhr.status + ": " + xhr.responseText);
        }
      });
    });
  });
</script> {% endcomment %}





{% endblock content %}




